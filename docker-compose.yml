services:
  kubeagentix-ce:
    build:
      context: .
      dockerfile: Dockerfile
    image: kubeagentix/kubeagentix-ce:local
    container_name: kubeagentix-ce
    ports:
      - "4000:4000"
    environment:
      NODE_ENV: production
      PORT: 4000
      ANTHROPIC_API_KEY: ${ANTHROPIC_API_KEY:-}
      OPENAI_API_KEY: ${OPENAI_API_KEY:-}
      GOOGLE_API_KEY: ${GOOGLE_API_KEY:-}
      VITE_USE_WASM_CORE: ${VITE_USE_WASM_CORE:-true}
      KUBEAGENTIX_PROXY_LOCALHOST_KUBECONFIG: ${KUBEAGENTIX_PROXY_LOCALHOST_KUBECONFIG:-true}
    volumes:
      - ${HOME}/.kube:/root/.kube:ro
    extra_hosts:
      - "host.docker.internal:host-gateway"
    restart: unless-stopped
